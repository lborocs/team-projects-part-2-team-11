<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topics</title>
    <link rel="stylesheet" type="text/css" href="styleTopics.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <!-- code for the black header div -->
    <div class="header">
        <div class="logo2">
            <img src="logo2.png" height="50px" width="50px">
        </div>
        <div class="logo">
            <img src="logo.png" height="60px" width="280px">
        </div>
        <div class="buttons">
            <button class="user-btn">
                <img src="user.png" class="user-pic" onclick="toggleMenu()">
            </button>
            <div class="sub-menu-wrap" id="subMenu">
                <div class="sub-menu">
                    <div class="user-info">
                        <img src="user.png" alt="user icon">
                        <h4>James Aldrino</h4>
                    </div>
                    <hr>
                    <a href="#" class="sub-menu-link">
                    <img src="help.png" alt="help icon">
                    <p>Help </p>
                    <span>></span>
                    </a>
                    <a href="#" class="sub-menu-link">
                    <img src="logout.png" alt="logout icon">
                    <p>logout</p>
                    <span>></span>
                    </a>
                </div>
            </div>
        </div>
    </div>
<!-- code for the MAIN CONTENT after header div -->
    <div class="main-content">
        <div class="arrow"></div>
        <div class="tabs">
            <button class="tab">
                <img src="productivity.png" alt="Productivity Icon" height="30px" width="30px">
                Productivity</button>
            <button class="tab">
                <img src="knowledge.png" alt="Knowledge Icon" height="20px" width="20px">
                Knowledge</button>
            <button class="tab">
                <img src="manage.png" alt="Manage Icon" height="20px" width="20px">
                Manage</button>
            <button class="tab">
                <img src="reminder.png" alt="Reminder Icon" height="20px" width="20px">
                Reminders</button>
            <button class="tab">
                <img src="invite.png" alt="Invite Icon" height="20px" width="20px">
                Invite</button>

        </div>
        <div class="white-div">
            <div class="content" id="content1" style="display: none;">
                <!-- Content for the 'Productivity' tab -->
                <h2>Productivity Content</h2>
            </div>
            <div class="content" id="knowledgeContent" style="display: none;">
                <!-- Content for the 'Knowledge' tab -->
                <div id="topicsNavbar">
                    <div class="topicsNavbarContent" id="page">Page</div>
                    <div class="topicsNavbarContent" id="all">All Posts</div>
                    <div class="topicsNavbarContent" id="recent">Recent</div>
                    <div class="topicsNavbarContent" id="mostLiked">Most Liked</div>
                    <div id="searchContent" class="topicsNavbarContent">
                        <form>
                            <div>
                                <input type="text" placeholder="Search..." name="search">
                                <button id="search-button" type="submit">
                                    <i class="fa fa-search" style="color: #ed992b;"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <hr>
                <div class="topicHeader"> 
                    <h2 class="headerContent">TOPIC</h2>
                    <h2 class="headerContent">POSTS</h2>
                </div>
                <div>
                    <div class="topics">
                        <a href="file:///Users/fionakissi/Documents/bagel_game/team-projects-part-2-team-11/Make-it-All-Knowledge%20System/posts.html" id="openModalLink">Topic 1</a>
                    </div>
                    <div class="topics">
                        <a href="file:///Users/fionakissi/Documents/bagel_game/team-projects-part-2-team-11/Make-it-All-Knowledge%20System/posts.html" id="openModalLink">Topic 2</a>
                    </div>
                    <div class="topics">
                        <a href="file:///Users/fionakissi/Documents/bagel_game/team-projects-part-2-team-11/Make-it-All-Knowledge%20System/posts.html" id="openModalLink">Topic 3</a>
                    </div>
                </div>
            </div>
            <div class="content" id="content3" style="display: none;">
                <!-- Content for the 'Manage' tab -->
                <h2>Manage Content</h2>
            </div>
            <div class="content" id="content4" style="display: none;">
                <!-- Content for the 'Other' tab -->
                <h2>Other Content</h2>
            </div>
            <div class="content" id="content5" style="display: none;">
                <!-- Content for the 'Other2' tab -->
                <h2>Other2 Content</h2>
            </div>
        </div>
    </div>
    <!-- section for footer -->
    <div class="footer">
        <p><u>makeitall.co.uk Acceptable Use Policy</u></p>
    </div>


<script>
    let subMenu = document.getElementById("subMenu");
    let userButton = document.querySelector(".user-btn");

    function toggleMenu() {
        subMenu.classList.toggle("open-menu");

        if (subMenu.classList.contains("open-menu")) {
            // Add event listener to detect clicks outside the submenu
            document.addEventListener('click', closeMenuOutside);
        } else {
            // If menu is closed, remove the click event listener
            document.removeEventListener('click', closeMenuOutside);
        }
    }

    function closeMenuOutside(event) {
        // Check if the clicked element is outside the user button and submenu
        if (!subMenu.contains(event.target) && !userButton.contains(event.target)) {
            subMenu.classList.remove("open-menu");
            // Remove the click event listener after closing the submenu
            document.removeEventListener('click', closeMenuOutside);
        }
    }

    const tabs = document.querySelectorAll('.tab');
    const arrow = document.querySelector('.arrow');
    const contents = document.querySelectorAll('.content'); // Get all content divs

    function positionArrow() {
        const activeTab = document.querySelector('.tab.active');
        if (activeTab) {
            const tabRect = activeTab.getBoundingClientRect();
            const arrowWidth = arrow.offsetWidth;
            arrow.style.left = `${tabRect.left + (activeTab.offsetWidth - arrowWidth) / 1.7}px`;
        }
    }

    tabs.forEach((tab, index) => {
        tab.addEventListener('click', function () {
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            contents.forEach(content => (content.style.display = 'none'));
            contents[index].style.display = 'block';
            arrow.style.display = 'block';
            positionArrow();
        });
    });

    // Handle window resize event
    window.addEventListener('resize', function () {
        if (arrow.style.display === 'block') {
            positionArrow();
        }
    });

    function toggleLike() {
            const likeButton = document.getElementById('likeButton');
            let likeCount = parseInt(likeButton.getAttribute('data-count'));

            if (likeCount>=1){
            // Increment the like count
                likeCount--;
            // Update the like count in the data-count attribute
                likeButton.setAttribute('data-count', likeCount);
            // Update the button text with the new count
                document.querySelector('.like-count').innerText = likeCount;
            } else{
            // Increment the like count
                likeCount++;
            // Update the like count in the data-count attribute
                likeButton.setAttribute('data-count', likeCount);
            // Update the button text with the new count
                document.querySelector('.like-count').innerText = likeCount;
        }
    }

    function toggleUpdate() {
        const updateButton = document.getElementById('updateButton');
        let updateCount = parseInt(updateButton.getAttribute('data-count'));

        if (updateCount>=1){
        // Increment the like count
            updateCount--;
        // Update the like count in the data-count attribute
            updateButton.setAttribute('data-count', updateCount);
        // Update the button text with the new count
            document.querySelector('.update-count').innerText = updateCount;
        } else{
        // Increment the like count
            updateCount++;
        // Update the like count in the data-count attribute
            updateButton.setAttribute('data-count', updateCount);
        // Update the button text with the new count
            document.querySelector('.update-count').innerText = updateCount;
        }
    }
</script>

</body>
</html>